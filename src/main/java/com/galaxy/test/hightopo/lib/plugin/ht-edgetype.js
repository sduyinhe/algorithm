!function(C){"use strict";var W="ht",k=C[W],s=Math,c=s.max,j=s.min,g=s.abs,D=s.atan2,v=s.cos,e=s.sin,H=s.ceil,w=k.Default,T=w.getInternal(),Q=k.List,f=T.Mat,q=T.getNodeRect,A=T.intersectionLineRect,t=w.getDistance,Y=w.setEdgeType,J="left",O="right",h="top",r="bottom",n="edge.type",d="edge.gap",b="edge.center",$="edge.extend",Z=function(U,A){return q(U,A).width},u=function(v,n){return q(v,n).height},S=function(o,G){var w=T.getPosition(G.s("edge.source.position"),q(o,G._40I));return w.x+=G.s("edge.source.offset.x"),w.y+=G.s("edge.source.offset.y"),w},I=function(K,D){var z=T.getPosition(D.s("edge.target.position"),q(K,D._41I));return z.x+=D.s("edge.target.offset.x"),z.y+=D.s("edge.target.offset.y"),z},m=function(i,m){var s=i.s(n),E=i.getEdgeGroup();if(E){var k=0;if(E.eachSiblingEdge(function(u){m.isVisible(u)&&u.s(n)==s&&k++}),k>1)return i.s(d)*(k-1)/2}return 0},y=function($,S){var b=$.s(n),L=$.isLooped();if(!$.getEdgeGroup())return L?$.s(d):0;var k,I=0,j=0,A=0;return $.getEdgeGroup().getSiblings().each(function(g){g.each(function(r){if(r._40I===$._40I&&r.s(n)==b&&S.isVisible(r)){var g=r.s(d);k?(j+=A/2+g/2,A=g):(k=r,A=g),r===$&&(I=j)}})}),L?j-I+A:I-j/2},R=function(F,$){var w=F.size(),f=$.s("edge.corner.radius");if(0===f)return{points:F,segments:new Q([1,w])};if(0>f)return{points:F};var P,d=new Q,B=new Q,x=F.get(0);d.add(x),B.add(1);for(var J=1;w>J;J++)if(w>J+1){var T=F.get(J),X=F.get(J+1),q=x.x,Z=x.y,o=T.x,r=T.y,l=r-Z,z=o-q,p=D(l,z);P=j(.99*t(x,T),f),d.add({x:o-P*v(p),y:r-P*e(p)}),d.add(T),q=T.x,Z=T.y,o=X.x,r=X.y,l=r-Z,z=o-q,p=D(l,z),P=j(.99*t(T,X),f),x={x:q+P*v(p),y:Z+P*e(p)},d.add(x),B.addAll([2,3])}else d.add(F.get(J)),B.add(2);return{points:d,segments:B}};T.addMethod(k.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),Y("boundary",function(m,V,c,v){v||(V=-V);var g,N=S(c,m),i=I(c,m),n=q(c,m._40I),p=q(c,m._41I),h=new f(D(i.y-N.y,i.x-N.x)),B=t(N,i),K=N.x,s=N.y;return g=h.tf(0,V),N={x:g.x+K,y:g.y+s},g=h.tf(B,V),i={x:g.x+K,y:g.y+s},g=A(N,i,n),g&&(N={x:g[0],y:g[1]}),g=A(N,i,p),g&&(i={x:g[0],y:g[1]}),{points:new Q([N,i])}}),Y("ripple",function(C,B,W,T){T||(B=-B);var d=S(W,C),R=I(W,C),F=t(d,R),x=j(C.s("edge.offset"),F/2),q=C.s("edge.ripple.size"),X=C.s("edge.ripple.length"),e=C.s("edge.ripple.both"),k=C.s(b),p=C.s("edge.ripple.elevation"),v=new Q,V=C.s("edge.ripple.straight")?null:new Q,w=new f(D(R.y-d.y,R.x-d.x));T||(p=-p),F-=2*x,X>0&&(q=H(F/X));var l=F/q;V&&V.add(1);for(var c=0;q>c;c++)V&&V.add(3),0===c?v.add({x:x+l*c,y:k?0:B}):v.add({x:x+l*c,y:B}),v.add({x:x+l*c+l/2,y:p+B}),e&&(p=-p);for(v.add({x:x+F,y:k?0:B}),c=0;c<v.size();c++){var g=w.tf(v.get(c));g.x+=d.x,g.y+=d.y,v.set(c,g)}return{points:v,segments:V}}),Y("h.v",function(G,q,P){q=y(G,P);var E=new Q,N=G.s(b),m=S(P,G),w=m.x,X=m.y,T=I(P,G),i=T.x,s=T.y,H=0,x=0,B=i-w,k=s-X;return N||(H=Z(P,G._40I)/2,x=u(P,G._41I)/2),B>=0&&0>=k?(E.add({x:w+H,y:X+q}),E.add({x:i+q,y:X+q}),E.add({x:i+q,y:s+x})):0>=B&&k>=0?(E.add({x:w-H,y:X+q}),E.add({x:i+q,y:X+q}),E.add({x:i+q,y:s-x})):B>=0&&k>=0?(E.add({x:w+H,y:X+q}),E.add({x:i-q,y:X+q}),E.add({x:i-q,y:s-x})):(E.add({x:w-H,y:X+q}),E.add({x:i-q,y:X+q}),E.add({x:i-q,y:s+x})),R(E,G)}),Y("v.h",function(s,h,e){h=y(s,e);var v=new Q,G=s.s(b),n=S(e,s),K=n.x,o=n.y,H=I(e,s),t=H.x,O=H.y,x=0,f=0,c=t-K,Y=O-o;return G||(x=Z(e,s._41I)/2,f=u(e,s._40I)/2),c>=0&&0>=Y?(v.add({x:K+h,y:o-f}),v.add({x:K+h,y:O+h}),v.add({x:t-x,y:O+h})):0>=c&&Y>=0?(v.add({x:K+h,y:o+f}),v.add({x:K+h,y:O+h}),v.add({x:t+x,y:O+h})):c>=0&&Y>=0?(v.add({x:K-h,y:o+f}),v.add({x:K-h,y:O+h}),v.add({x:t-x,y:O+h})):(v.add({x:K-h,y:o-f}),v.add({x:K-h,y:O+h}),v.add({x:t+x,y:O+h})),R(v,s)}),Y("ortho",function(M,z,D){var w=new Q,t=M.s(b),$=M.s("edge.ortho"),J=M._40I,v=M._41I,K=S(D,M),O=K.x,f=K.y,Y=I(D,M),j=Y.x,W=Y.y,H=j-O,o=W-f,p=t?0:Z(D,J)/2,_=t?0:u(D,J)/2,e=t?0:Z(D,v)/2,A=t?0:u(D,v)/2,V=(H-(p+e)*(H>0?1:-1))*$,k=(o-(_+A)*(o>0?1:-1))*$;return g(H)<g(o)?H>=0&&0>=o?(w.add({x:O+z,y:f-_}),w.add({x:O+z,y:f+k+z-_}),w.add({x:j+z,y:f+k+z-_}),w.add({x:j+z,y:W+A})):0>=H&&o>=0?(w.add({x:O+z,y:f+_}),w.add({x:O+z,y:f+k+z+_}),w.add({x:j+z,y:f+k+z+_}),w.add({x:j+z,y:W-A})):H>=0&&o>=0?(w.add({x:O+z,y:f+_}),w.add({x:O+z,y:f+k-z+_}),w.add({x:j+z,y:f+k-z+_}),w.add({x:j+z,y:W-A})):(w.add({x:O+z,y:f-_}),w.add({x:O+z,y:f+k-z-_}),w.add({x:j+z,y:f+k-z-_}),w.add({x:j+z,y:W+A})):H>=0&&0>=o?(w.add({x:O+p,y:f+z}),w.add({x:O+V+z+p,y:f+z}),w.add({x:O+V+z+p,y:W+z}),w.add({x:j-e,y:W+z})):0>=H&&o>=0?(w.add({x:O-p,y:f+z}),w.add({x:O+V+z-p,y:f+z}),w.add({x:O+V+z-p,y:W+z}),w.add({x:j+e,y:W+z})):H>=0&&o>=0?(w.add({x:O+p,y:f+z}),w.add({x:O+V-z+p,y:f+z}),w.add({x:O+V-z+p,y:W+z}),w.add({x:j-e,y:W+z})):(w.add({x:O-p,y:f+z}),w.add({x:O+V-z-p,y:f+z}),w.add({x:O+V-z-p,y:W+z}),w.add({x:j+e,y:W+z})),R(w,M)}),Y("flex",function(D,e,p){var l=new Q,M=D.s("edge.flex")+m(D,p),n=D.s(b),d=D._40I,t=D._41I,f=S(p,D),J=f.x,T=f.y,r=I(p,D),G=r.x,a=r.y,K=G-J,$=a-T,N=n?0:Z(p,d)/2,w=n?0:u(p,d)/2,Y=n?0:Z(p,t)/2,s=n?0:u(p,t)/2,L=K>0?M:-M,X=$>0?M:-M;return g(K)<g($)?K>=0&&0>=$?(l.add({x:J+e,y:T-w}),l.add({x:J+e,y:T+X+e-w}),l.add({x:G+e,y:a-X+e+s}),l.add({x:G+e,y:a+s})):0>=K&&$>=0?(l.add({x:J+e,y:T+w}),l.add({x:J+e,y:T+X+e+w}),l.add({x:G+e,y:a-X+e-s}),l.add({x:G+e,y:a-s})):K>=0&&$>=0?(l.add({x:J+e,y:T+w}),l.add({x:J+e,y:T+X-e+w}),l.add({x:G+e,y:a-X-e-s}),l.add({x:G+e,y:a-s})):(l.add({x:J+e,y:T-w}),l.add({x:J+e,y:T+X-e-w}),l.add({x:G+e,y:a-X-e+s}),l.add({x:G+e,y:a+s})):K>=0&&0>=$?(l.add({x:J+N,y:T+e}),l.add({x:J+L+e+N,y:T+e}),l.add({x:G-L+e-Y,y:a+e}),l.add({x:G-Y,y:a+e})):0>=K&&$>=0?(l.add({x:J-N,y:T+e}),l.add({x:J+L+e-N,y:T+e}),l.add({x:G-L+e+Y,y:a+e}),l.add({x:G+Y,y:a+e})):K>=0&&$>=0?(l.add({x:J+N,y:T+e}),l.add({x:J+L-e+N,y:T+e}),l.add({x:G-L-e-Y,y:a+e}),l.add({x:G-Y,y:a+e})):(l.add({x:J-N,y:T+e}),l.add({x:J+L-e-N,y:T+e}),l.add({x:G-L-e+Y,y:a+e}),l.add({x:G+Y,y:a+e})),R(l,D)}),Y("extend.east",function(x,H,w){var k=new Q,X=x.s($)+m(x,w),O=x.s(b),L=S(w,x),C=L.x+(O?0:Z(w,x._40I)/2),U=L.y,s=I(w,x),B=s.x+(O?0:Z(w,x._41I)/2),N=s.y,A=c(C,B)+X;return U>N?(k.add({x:C,y:U+H}),k.add({x:A+H,y:U+H}),k.add({x:A+H,y:N-H}),k.add({x:B,y:N-H})):(k.add({x:C,y:U-H}),k.add({x:A+H,y:U-H}),k.add({x:A+H,y:N+H}),k.add({x:B,y:N+H})),R(k,x)}),Y("extend.west",function(U,q,t){var g=new Q,T=U.s($)+m(U,t),N=U.s(b),J=S(t,U),F=J.x-(N?0:Z(t,U._40I)/2),D=J.y,A=I(t,U),k=A.x-(N?0:Z(t,U._41I)/2),y=A.y,Y=j(F,k)-T;return D>y?(g.add({x:F,y:D+q}),g.add({x:Y-q,y:D+q}),g.add({x:Y-q,y:y-q}),g.add({x:k,y:y-q})):(g.add({x:F,y:D-q}),g.add({x:Y-q,y:D-q}),g.add({x:Y-q,y:y+q}),g.add({x:k,y:y+q})),R(g,U)}),Y("extend.north",function(q,w,i){var K=new Q,D=q.s($)+m(q,i),N=q.s(b),c=S(i,q),p=c.x,h=c.y-(N?0:u(i,q._40I)/2),V=I(i,q),x=V.x,O=V.y-(N?0:u(i,q._41I)/2),l=j(h,O)-D;return p>x?(K.add({y:h,x:p+w}),K.add({y:l-w,x:p+w}),K.add({y:l-w,x:x-w}),K.add({y:O,x:x-w})):(K.add({y:h,x:p-w}),K.add({y:l-w,x:p-w}),K.add({y:l-w,x:x+w}),K.add({y:O,x:x+w})),R(K,q)}),Y("extend.south",function(e,q,U){var E=new Q,Y=e.s($)+m(e,U),s=e.s(b),z=S(U,e),G=z.x,N=z.y+(s?0:u(U,e._40I)/2),H=I(U,e),D=H.x,v=H.y+(s?0:u(U,e._41I)/2),J=c(N,v)+Y;return G>D?(E.add({y:N,x:G+q}),E.add({y:J+q,x:G+q}),E.add({y:J+q,x:D-q}),E.add({y:v,x:D-q})):(E.add({y:N,x:G-q}),E.add({y:J+q,x:G-q}),E.add({y:J+q,x:D+q}),E.add({y:v,x:D+q})),R(E,e)});var V=function(I,k,c,D,z){if(D.sort(function(I,Y){var S=I.getSourceAgent()===k?I.getTargetAgent():I.getSourceAgent(),n=Y.getSourceAgent()===k?Y.getTargetAgent():Y.getSourceAgent(),g=S.p(),L=n.p();if(c===J||c===O){if(g.y>L.y)return 1;if(g.y<L.y)return-1}else{if(g.x>L.x)return 1;if(g.x<L.x)return-1}return w.sortFunc(I.getId(),Y.getId())}),z){for(var p,t,e,m=I.getSourceAgent(),K=I.getTargetAgent(),H=0;H<D.size();H++){var F=D.get(H);F.getSourceAgent()===m&&F.getTargetAgent()===K||F.getTargetAgent()===m&&F.getSourceAgent()===K?(t||(t=new Q),t.add(F,0)):t?(e||(e=new Q),e.add(F)):(p||(p=new Q),p.add(F))}D.clear(),p&&D.addAll(p),t&&D.addAll(t),e&&D.addAll(e)}var o=D.indexOf(I),q=D.size(),W=I.s(d);return{side:c,index:o,size:q,offset:-W*(q-1)/2+W*o}},p=function(H,g,L,m,S){var l=g.s(n);return V(g,L,m,L.getAgentEdges().toList(function(x){return H.isVisible(x)&&x.s(n)===l}),S)},z=function(A,v){var x=A.getSourceAgent()===v?A.getTargetAgent():A.getSourceAgent(),Y=v.p(),$=x.p(),n=$.x-Y.x,i=$.y-Y.y;return n>0&&g(i)<=n?O:0>n&&g(i)<=-n?J:i>0&&g(n)<=i?r:h},L=function(P,O,I){var K=O.s(n),Y=z(O,I);return V(O,I,Y,I.getAgentEdges().toList(function(t){return P.isVisible(t)&&t.s(n)===K&&z(t,I)===Y}))},i=function(g,o){var u=g.getSourceAgent()===o,H=u?g.getTargetAgent():g.getSourceAgent(),F=o.p(),e=H.p();return u?F.y>e.y?h:r:F.x<e.x?O:J},K=function(f,F,N){var P=F.s(n),q=i(F,N);return V(F,N,q,N.getAgentEdges().toList(function(A){return f.isVisible(A)&&A.s(n)===P&&i(A,N)===q}),q===O||q===r)},_=function(S,l){var H=S.getSourceAgent()===l,y=H?S.getTargetAgent():S.getSourceAgent(),B=l.p(),$=y.p();return H?B.x<$.x?O:J:B.y>$.y?h:r},E=function(z,y,R){var e=y.s(n),G=_(y,R);return V(y,R,G,R.getAgentEdges().toList(function(a){return z.isVisible(a)&&a.s(n)===e&&_(a,R)===G}),G===O||G===r)},M=function(p,N,L){var G=p.getSourceAgent(),S=p.getTargetAgent(),X=G.getId()>S.getId(),i=X?S:G,z=X?G:S,H=i.p(),B=z.p(),C=L(N,p,i),v=L(N,p,z),V=p.s(b),d=V?0:Z(N,i)/2,w=V?0:Z(N,z)/2,n=V?0:u(N,i)/2,t=V?0:u(N,z)/2,g=C.offset,F=v.offset,P=C.side,q=v.side,A=new Q;return P===h?(A.add({x:H.x+g,y:H.y-n}),A.add({x:H.x+g,y:B.y+F}),q===J?A.add({x:B.x-w,y:B.y+F}):A.add({x:B.x+w,y:B.y+F})):P===r?(A.add({x:H.x+g,y:H.y+n}),A.add({x:H.x+g,y:B.y+F}),q===J?A.add({x:B.x-w,y:B.y+F}):A.add({x:B.x+w,y:B.y+F})):P===J?(A.add({x:H.x-d,y:H.y+g}),A.add({x:B.x+F,y:H.y+g}),q===r?A.add({x:B.x+F,y:B.y+t}):A.add({x:B.x+F,y:B.y-t})):P===O&&(A.add({x:H.x+d,y:H.y+g}),A.add({x:B.x+F,y:H.y+g}),q===r?A.add({x:B.x+F,y:B.y+t}):A.add({x:B.x+F,y:B.y-t})),X&&A.reverse(),R(A,p)};Y("ortho2",function(p,t,U){var l,P,k=p.s(b),i=p.s("edge.ortho"),M=p.getSourceAgent(),f=p.getTargetAgent(),E=M.getId()>f.getId(),j=E?f:M,N=E?M:f,A=j.p(),e=N.p(),w=L(U,p,j),X=L(U,p,N),C=k?0:Z(U,j)/2,I=k?0:u(U,j)/2,x=k?0:Z(U,N)/2,n=k?0:u(U,N)/2,m=new Q,z=w.offset,c=X.offset,$=w.side;return $===O?(l=e.y>A.y?-z:z,P=A.x+C+(e.x-x-A.x-C)*i,m.add({x:A.x+C,y:A.y+z}),m.add({x:P+l,y:A.y+z}),m.add({x:P+l,y:e.y+c}),m.add({x:e.x-x,y:e.y+c})):$===J?(l=e.y>A.y?-z:z,P=A.x-C-(A.x-C-e.x-x)*i,m.add({x:A.x-C,y:A.y+z}),m.add({x:P-l,y:A.y+z}),m.add({x:P-l,y:e.y+c}),m.add({x:e.x+x,y:e.y+c})):$===r?(l=e.x>A.x?-z:z,P=A.y+I+(e.y-n-A.y-I)*i,m.add({x:A.x+z,y:A.y+I}),m.add({x:A.x+z,y:P+l}),m.add({x:e.x+c,y:P+l}),m.add({x:e.x+c,y:e.y-n})):$===h&&(l=e.x>A.x?-z:z,P=A.y-I-(A.y-I-e.y-n)*i,m.add({x:A.x+z,y:A.y-I}),m.add({x:A.x+z,y:P-l}),m.add({x:e.x+c,y:P-l}),m.add({x:e.x+c,y:e.y+n})),E&&m.reverse(),R(m,p)},!0),Y("flex2",function(v,H,y){var p,e=v.getSourceAgent(),E=v.getTargetAgent(),k=e.getId()>E.getId(),G=k?E:e,n=k?e:E,i=G.p(),s=n.p(),o=L(y,v,G),V=L(y,v,n),_=v.s(b),j=v.s("edge.flex")+(o.size-1)/2*v.s(d),g=_?0:Z(y,G)/2,C=_?0:u(y,G)/2,$=_?0:Z(y,n)/2,D=_?0:u(y,n)/2,t=new Q,X=o.offset,q=V.offset,S=o.side;return S===O?(p=s.y>i.y?-X:X,t.add({x:i.x+g,y:i.y+X}),t.add({x:i.x+g+j+p,y:i.y+X}),t.add({x:s.x-$-j+p,y:s.y+q}),t.add({x:s.x-$,y:s.y+q})):S===J?(p=s.y>i.y?-X:X,t.add({x:i.x-g,y:i.y+X}),t.add({x:i.x-g-j-p,y:i.y+X}),t.add({x:s.x+$+j-p,y:s.y+q}),t.add({x:s.x+$,y:s.y+q})):S===r?(p=s.x>i.x?-X:X,t.add({x:i.x+X,y:i.y+C}),t.add({x:i.x+X,y:i.y+C+j+p}),t.add({x:s.x+q,y:s.y-D-j+p}),t.add({x:s.x+q,y:s.y-D})):S===h&&(p=s.x>i.x?-X:X,t.add({x:i.x+X,y:i.y-C}),t.add({x:i.x+X,y:i.y-C-j-p}),t.add({x:s.x+q,y:s.y+D+j-p}),t.add({x:s.x+q,y:s.y+D})),k&&t.reverse(),R(t,v)},!0),Y("extend.north2",function(S,c,H){var x=S.getSourceAgent(),n=S.getTargetAgent(),K=x.getId()>n.getId(),z=K?n:x,r=K?x:n,i=z.p(),f=r.p(),a=p(H,S,z,h),e=p(H,S,r,h,!0),l=S.s(b),G=l?0:u(H,z)/2,t=l?0:u(H,r)/2,E=a.offset,C=e.offset,M=S.s($)+(a.size-1)/2*S.s(d),Y=j(i.y-G,f.y-t)-M+(i.x<f.x?E:-E),X=new Q;return X.add({x:i.x+E,y:i.y-G}),X.add({x:i.x+E,y:Y}),X.add({x:f.x+C,y:Y}),X.add({x:f.x+C,y:f.y-t}),K&&X.reverse(),R(X,S)},!0),Y("extend.south2",function(n,_,s){var S=n.getSourceAgent(),x=n.getTargetAgent(),W=S.getId()>x.getId(),v=W?x:S,H=W?S:x,m=v.p(),z=H.p(),E=p(s,n,v,r),j=p(s,n,H,r,!0),Z=n.s(b),l=Z?0:u(s,v)/2,h=Z?0:u(s,H)/2,t=E.offset,N=j.offset,Y=n.s($)+(E.size-1)/2*n.s(d),q=c(m.y+l,z.y+h)+Y+(m.x>z.x?t:-t),G=new Q;return G.add({x:m.x+t,y:m.y+l}),G.add({x:m.x+t,y:q}),G.add({x:z.x+N,y:q}),G.add({x:z.x+N,y:z.y+h}),W&&G.reverse(),R(G,n)},!0),Y("extend.west2",function(X,G,M){var r=X.getSourceAgent(),E=X.getTargetAgent(),S=r.getId()>E.getId(),x=S?E:r,k=S?r:E,I=x.p(),z=k.p(),i=p(M,X,x,h),s=p(M,X,k,h,!0),F=X.s(b),c=F?0:Z(M,x)/2,N=F?0:Z(M,k)/2,a=i.offset,U=s.offset,W=X.s($)+(i.size-1)/2*X.s(d),L=j(I.x-c,z.x-N)-W+(I.y<z.y?a:-a),B=new Q;return B.add({x:I.x-c,y:I.y+a}),B.add({x:L,y:I.y+a}),B.add({x:L,y:z.y+U}),B.add({x:z.x-N,y:z.y+U}),S&&B.reverse(),R(B,X)},!0),Y("extend.east2",function(v,O,s){var U=v.getSourceAgent(),l=v.getTargetAgent(),j=U.getId()>l.getId(),S=j?l:U,I=j?U:l,E=S.p(),K=I.p(),X=p(s,v,S,h),Y=p(s,v,I,h,!0),A=v.s(b),i=A?0:Z(s,S)/2,F=A?0:Z(s,I)/2,J=X.offset,t=Y.offset,C=v.s($)+(X.size-1)/2*v.s(d),P=c(E.x+i,K.x+F)+C+(E.y>K.y?J:-J),n=new Q;return n.add({x:E.x+i,y:E.y+J}),n.add({x:P,y:E.y+J}),n.add({x:P,y:K.y+t}),n.add({x:K.x+F,y:K.y+t}),j&&n.reverse(),R(n,v)},!0),Y("v.h2",function(J,g,f){return M(J,f,K)},!0),Y("h.v2",function(z,s,p){return M(z,p,E)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);