!function(d,E){"use strict";var $="ht",B=d[$],i="position",n="absolute",t="px",G="left",J="top",l="innerHTML",O="className",e="width",T="height",v="0",m="display",L="none",j="visibility",H="user-select",k="margin",F="padding",x=null,z=B.Color,c=B.Default,M=c.getInternal(),s=d.setTimeout,I=d.setInterval,S=d.clearTimeout,p=d.clearInterval,K=d.parseInt,W=c.isLeftButton,A=c.isDragging,Z=c.startDragging,g=c.getDistance,Y=c.isTouchable,C=z.widgetIconHighlight,U=z.widgetIconBorder,N=z.widgetIconGradient,R=function(){return document},Q=function(Z,y){return Z.querySelectorAll(y)},r=function($){var o=R().createElement($);return"ul"===$&&(y(o,i,"relative"),y(o,k,v),y(o,F,v),y(o,"list-style",L),y(o,"box-sizing","border-box"),y(o,"-moz-box-sizing","border-box"),y(o,m,"inline-block"),y(o,"vertical-align","text-bottom"),y(o,"border","1px solid "+c.contextMenuBorderColor),y(o,"box-shadow","0 0 16px 1px "+c.contextMenuShadowColor),y(o,"overflow","hidden"),c.contextMenuBorderRadius&&y(o,"border-radius",c.contextMenuBorderRadius+t)),o},V=function(_){var Q=_.touches[0];return Q?Q:_.changedTouches[0]},w=function(){return r("div")},D=function(){return r("canvas")},y=function(e,t,X){e.style.setProperty(t,X,x)},b=function(M,g,P){c.def(B.widget[M],g,P)},u=function(C,H){C.appendChild(H)},o=function(b,_){b.removeChild(_)},X=function(){return R().body},P=function(o,S,s,C){o.addEventListener(S,s,!!C)},q=function(R,$,J,M){R.removeEventListener($,J,!!M)};M.addMethod(c,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:U},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:C}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:U},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:C,gradient:c.imageGradient,gradientColor:N,background:C}]},contextMenuLabelFont:(Y?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"â–¶"},!0);var h=function(a){var R=this,Z=a._view;if(R.$11b=a,R.addListeners(),P(Z,"contextmenu",function(k){k.preventDefault()}),!Y){var $=R.$37b=R.$36b.bind(R);P(Z,"mouseover",$),P(Z,"mouseout",$)}};c.def(h,E,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(H){if(c.preventDefault(H),W(H)){for(var F=this,j=F.$11b,K=F.getView(),w=K.children,n=0;n<w.length;n++){var a=w[n],D=a.$24b,P=a.$25b;if(D&&D.contains(H.target))return j.scrollUp(a),F.$28b=s(function(){F.$29b=I(function(){j.scrollUp(a)},100)},500),Z(F,H),void 0;if(P&&P.contains(H.target))return j.scrollDown(a),F.$28b=s(function(){F.$29b=I(function(){j.scrollDown(a)},100)},500),Z(F,H),void 0}Y&&(H=V(H)),F.$30b={x:H.pageX,y:H.pageY}}},handle_mousedown:function(M){this.handle_touchstart(M)},handle_touchend:function(j){if(W(j)){var H=this,C=H.$30b,_=Y?{x:V(j).pageX,y:V(j).pageY}:{x:j.pageX,y:j.pageY};if(!C||g(C,_)>1)return delete H.$30b,void 0;for(var b=H.getView(),y=H.$11b,I=j.target,d=x,z=x,o=y._items,v=b.$26b,A=0;A<v.length;A++)if(z=v[A],z.contains(I)){d=z.getAttribute("data-id");break}if(d&&o){var s=y.$17b(o,function(D){return D._id===d});if(s){var i=!1;s.disabled instanceof Function?i=s.disabled.call(y,s):s.disabled===!0&&(i=!0),i||(s.items?Y&&H.$36b(z,!0):y.$1b(s,j))}}delete H.$30b}},$36b:function(b,X){if(!A()){var D,N=this,W=N.$11b,Z=N.getView(),f=W.$20b||Z.children[0],R=W.$19b,p=Z.$26b,x=Z.children,B=b.target,u=Z.getBoundingClientRect(),q=c.getWindowInfo(),S=q.width,E=q.height,s=function(L){for(var k=0;k<x.length;k++){var u=x[k],G=new RegExp(L+"$"),b=u[O];if(b&&(G.test(b)||b.indexOf(L+" ")>=0))return u}},F=function(Y){for(var t=0;t<p.length;t++){var H=p[t],$=new RegExp(Y+"$"),M=H[O];if(M&&($.test(M)||M.indexOf(Y+" ")>=0))return H}},g=function(X){var A=F("menu-item"+X.$45b),n=A.getBoundingClientRect(),V=n.top-u.top,l=n.left-u.left;y(X,J,V+t),y(X,G,l+n.width+t);var U=X.getBoundingClientRect(),h=U.top,Z=U.left,b=U.height,T=U.width,$=h+b+2,K=Z+T+2;$>E&&y(X,J,V+E-$+t),K>S&&y(X,G,l-T+t)};if(X)D=b;else{if("mouseover"===b.type){for(var h=0;h<p.length;h++){var C=p[h];if(C.contains(B)){D=C;break}}if(!D&&R){var v=R.parentNode,H=s("submenu"+R.getAttribute("data-id"));(H&&H.contains(B)||v&&v.contains(B))&&(D=R)}}else if("mouseout"===b.type){for(var l=!1,_=b.relatedTarget,h=0;h<x.length;h++){var o=x[h];if("hidden"!==o.style.visibility&&o.contains(_)){l=!0;break}}if(l)return}!D&&f&&(D=F("menu-item"+(f.$45b||"NaN")))}if(D!=R){if(R)for(var r=R;r;){r[O]=r[O].replace(" menu-item-hover",""),r[O].indexOf("disabled")<0&&(y(r,"background-color",c.contextMenuBackground),y(r,"color",c.contextMenuLabelColor));var Q=s("submenu"+r.getAttribute("data-id"));Q&&y(Q,j,"hidden");var Y=r.parentNode;r=F("menu-item"+(Y.$45b||"NaN"))}if(D){for(var e=D,T=[];e;){e[O]+=" menu-item-hover",e[O].indexOf("disabled")<0&&(y(e,"background-color",c.contextMenuHoverBackground),y(e,"color",c.contextMenuHoverLabelColor));var V=s("submenu"+e.getAttribute("data-id"));V&&(y(V,j,"visible"),T.push(V));var Y=e.parentNode;e=F("menu-item"+(Y.$45b||"NaN"))}T.reverse(),T.forEach(function(z){g(z)})}}W.$19b=D,W.$20b=D?D.parentNode:Z.children[0]}},handle_mouseup:function(D){this.handle_touchend(D)},handleWindowTouchEnd:function(){var R=this;R.$28b!=x&&(S(R.$28b),delete R.$28b),R.$29b!=x&&(p(R.$29b),delete R.$29b),delete R.$34b,delete R.$30b,delete R.$35b},handleWindowMouseUp:function(h){this.handleWindowTouchEnd(h)},handle_mousemove:function(V){this.handle_touchmove(V)},handle_touchmove:function(J){if(!A()&&W(J)){for(var Q=this,l=Q.getView().children,w=x,_=0;_<l.length;_++){var u=l[_];if(u.contains(J.target)){w=u;break}}var n=Q.$30b,P=Y?{x:V(J).pageX,y:V(J).pageY}:{x:J.pageX,y:J.pageY};w&&n&&g(n,P)>2&&(Z(Q,J),Q.$34b=w,Q.$35b=w.$18b)}},handleWindowTouchMove:function(P){var I=this,u=I.$11b,C=I.$34b,j=I.$35b,s=I.$30b;if(s&&C){var D=Y?{x:V(P).pageX,y:V(P).pageY}:{x:P.pageX,y:P.pageY},O=D.y-s.y;O>0?u.scrollUp(C,C.$18b-(j-O)):u.scrollDown(C,j-O-C.$18b)}},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},$10b:function(m,l){m.preventDefault();for(var Y=this,M=Y.getView().children,W=x,$=0;$<M.length;$++){var s=M[$];if(s.contains(m.target)){W=s;break}}if(W){var F=this.$11b,u=F.getRowHeight();Math.abs(l)>.05&&(l>0?F.scrollUp(W,l*u):0>l&&F.scrollDown(W,-l*u))}},handle_mousewheel:function(U){this.$10b(U,U.wheelDelta/40)},handle_DOMMouseScroll:function(C){this.$10b(C,-C.detail)},$44b:function(w){this.getView().contains(w.target)||this.$11b.hide()},$41b:function(S){this.$11b.show(S)},$4b:function(s,b){var v=this.$11b;if(b=b||v._items,b&&b.length&&s.keyCode){var I=[s.keyCode];s.shiftKey&&I.push(16),s.ctrlKey&&I.push(17),s.altKey&&I.push(18),/mac/.test(d.navigator?d.navigator.userAgent.toLowerCase():"")?s.metaKey&&I.push(17):s.metaKey&&I.push(91),I.sort();var S=I.join(),K=v.$17b(b,function(b){if(b.key){var s=b.key.slice(0);return s.sort(),S===s.join()}});if(K){K.preventDefault!==!1&&s.preventDefault();var M=!1;K.disabled instanceof Function?M=K.disabled.call(v,K):K.disabled===!0&&(M=!0),M||v.$1b(K,s)}}},$39b:function(T){var d=this,D=V(T);d.$32b={x:D.pageX,y:D.pageY}},$38b:function(x){var I=this,L=V(x);I.$31b={x:L.pageX,y:L.pageY},I.$33b=s(function(){I.$31b&&(I.$32b?g(I.$31b,I.$32b)<10&&I.$11b.show(x):I.$11b.show(x)),delete I.$33b,delete I.$31b,delete I.$32b},600)},$40b:function(){var w=this;w.$33b!=x&&(S(w.$33b),delete w.$33b,delete w.$31b,delete w.$32b)}}),B.widget.ContextMenu=function($){var l=this,R=l._view=M.createView(null,l);R[O]="ht-widget-contextmenu",l.setItems($),l.$13b=new h(l),y(R,"font",c.contextMenuLabelFont),y(R,i,n),y(R,"cursor","default"),y(R,"-webkit-"+H,L),y(R,"-moz-"+H,L),y(R,"-ms-"+H,L),y(R,H,L),y(R,"box-sizing","border-box"),y(R,"-moz-box-sizing","border-box"),c.baseZIndex!=x&&y(R,"z-index",K(c.baseZIndex)+2+""),l.$3b=function(T){l.$13b.$4b(T)}},b("ContextMenu",E,{$5b:0,_items:x,$21b:x,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var F=this,X=F._enableGlobalKey;X===!1&&(P(R(),"keydown",F.$3b),F._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,q(R(),"keydown",this.$3b)},setItems:function(s){this._items=s},setVisibleFunc:function(Q){this.$16b=Q},setLabelMaxWidth:function(o){this.$43b=o},$1b:function($,n){var r=this;if("check"===$.type)$.selected=!$.selected;else if("radio"===$.type){var j=$.groupId;r.$17b(r._items,function(S){S.groupId===j&&(S.selected=!1)}),$.selected=!0}if(r.hide(),$.action)$.action.apply($.scope||r,[$,n]);else if($.href){var T=$.linkTarget||"_self";d.open($.href,T)}},getItemByProperty:function(t,M,R){var O=this;if(R=R||O._items,!R||0===R.length)return x;var f=O.$17b(R,function(b){return b[t]===M});return f||x},scrollUp:function(U,P){var m=this;if(P=P==x?20:P,P=K(P),0!==P){var R=0;U.$18b>P&&(R=U.$18b-P),m.$42b(U,R),U.scrollTop=R,U.$18b=R}},scrollDown:function(p,B){var M=this;if(B=B==x?20:B,B=K(B),0!==B){var j=p.$22b,Q=p.$23b,s=j-Q;Q+p.$18b+B<j&&(s=p.$18b+B),M.$42b(p,s),p.scrollTop=s,p.$18b=s}},$42b:function(X,O){O=O==x?X.$18b:O;var V=X.$24b,M=X.$25b;V&&(y(V,"top",O+t),0==O?y(V,m,L):y(V,m,"block")),M&&(y(M,"bottom",-O+t),O==X.$22b-X.$23b?y(M,m,L):y(M,m,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(v,h){for(var n=0;n<v.length;n++){var L=v[n];if(h(L))return L;if(L.items){var d=this.$17b(L.items,h);if(d)return d}}},$2b:function(K,g){for(var b=this,A=0;A<K.length;A++){b.$5b++;var M=K[A];if(!b.$16b||b.$16b.call(b,M)){var f=r("li"),R=b.$5b+"";if(y(f,"white-space","nowrap"),y(f,m,"block"),"separator"===M){var $=w();$[O]="separator",y($,T,c.contextMenuSeparatorWidth+t),y($,"background",c.contextMenuSeparatorColor),u(f,$)}else{M._id=R,f.setAttribute("data-id",R);var E=r("span"),z=r("span"),q=D(),Z=w();if(y(E,m,"inline-block"),y(z,m,"inline-block"),q[O]="prefix",y(q,m,"inline-block"),y(q,e,"1em"),y(q,T,"1em"),y(q,"vertical-align","middle"),y(q,k,"0 0.2em"),"check"===M.type&&M.selected?q[O]+=" check-prefix":"radio"===M.type&&M.selected&&(q[O]+=" radio-prefix"),u(f,q),M.icon){var U=D();U[O]="contextmenu-item-icon",y(U,m,"inline-block"),y(U,"vertical-align","middle"),y(U,T,"1.2em"),y(U,e,"1.2em"),y(U,"margin-right","0.2em"),U.$50b=M.icon,u(E,U)}if(z[l]=M.label,u(E,z),u(f,E),Z[O]="suffix",y(Z,m,"inline-block"),y(Z,"margin-left","1em"),y(Z,"margin-right","0.4em"),y(Z,"text-align","right"),y(Z,"font-size","75%"),M.items&&(Z[l]=c.contextMenuSubmenuMark),M.suffix&&(Z[l]=M.suffix),u(f,Z),f[O]="menu-item menu-item"+R,y(f,"background-color",c.contextMenuBackground),y(f,"color",c.contextMenuLabelColor),y(f,F,"3px 0"),M.disabled instanceof Function){var _=M.disabled.call(b,M);_&&(f[O]+=" disabled",y(f,"color",c.contextMenuDisabledLabelColor))}else M.disabled&&(f[O]+=" disabled",y(f,"color",c.contextMenuDisabledLabelColor));if(M.items){b.$21b||(b.$21b=new B.List);var J=r("ul");J[O]="submenu"+R,J.$45b=R,y(J,j,"hidden"),y(J,i,n),u(b._view,J),b.$21b.add(J),b.$2b(M.items,J)}}u(g,f)}}},rebuild:function(){var o=this,b=o._items,$=o._view;if($&&($[l]="",o.$21b=x,o.$5b=0,o.$19b=x,o.$20b=x,$.$26b=x,b&&0!==b.length)){var E=r("ul",o._r);u($,E),o.$2b(b,E)}},addTo:function(f){if(f){var J=this,u=J.$13b;if(J.$12b=f,J.$9b=function(G){u.$44b(G)},J.$27b=function(i){u.$41b(i)},Y){var y=J.$6b=function(S){u.$38b(S)},C=J.$7b=function(R){u.$39b(R)},t=J.$8b=function(a){u.$40b(a)};P(f,"touchstart",y,!0),P(f,"touchmove",C),P(f,"touchend",t)}else P(f,"contextmenu",J.$27b)}},show:function(T,b,s){var E=this,s=s==x?!0:!1,D=E._view;if(D){if(E.invalidate(),1===arguments.length){var L=T;if(Y){var q=V(L);T=q.pageX,b=q.pageY}else T=L.pageX,b=L.pageY}var A=c.getWindowInfo(),B=A.width,M=A.height,o=A.left,Z=A.top,z={pageX:T,pageY:b,clientX:T-o,clientY:b-Z,target:1,originEvent:L},H=z.clientX,f=z.clientY,C=function(s){s.style.height=M-6+t;var L=w(),Z=w(),J=function(D){y(D,i,n),y(D,"text-align","center"),y(D,e,"100%"),y(D,"font-size",10+t),y(D,"padding","2px 0"),y(D,"border","0px solid "+c.contextMenuScrollerBorderColor),y(D,"background-color",c.contextMenuScrollerColor1),D.style.backgroundImage="-webkit-linear-gradient(top, "+c.contextMenuScrollerColor1+", "+c.contextMenuScrollerColor2+")",D.style.backgroundImage="linear-gradient(to bottom, "+c.contextMenuScrollerColor1+", "+c.contextMenuScrollerColor2+")"};L[O]="menu-arrow-item menu-arrow-item-top",Z[O]="menu-arrow-item menu-arrow-item-bottom",J(L),y(L,"top",v),y(L,"left",v),y(L,"border-bottom-width",1+t),L[l]="â–²",J(Z),y(Z,"bottom",v),y(Z,"left",v),y(Z,"border-top-width",1+t),Z[l]="â–¼",s.$24b=L,s.$25b=Z,s.$18b=s.scrollTop,s.$22b=s.scrollHeight,s.$23b=s.clientHeight,u(s,L),u(s,Z),E.$42b(s)};E.beforeShow&&E.beforeShow(z);var j=E._items;if(j&&(L&&L.preventDefault(),j.length)){E.rebuild(),u(X(),D),D.$26b=Q(D,".menu-item");var N=D.children[0];N.offsetHeight>M&&C(N);var _=f+(s?1:0),K=H+(s?1:0),F=function(T){for(var V=0,H=0,f=0,g=E.$43b;f<T.children.length;f++){var G=T.children[f];if(G.getAttribute("data-id")){var R=G.children[1],v=G.children[2],I=R.children;if(g){var p=I[0];I.length>1&&(p=I[1]),p.offsetWidth>g&&(p[l]="<marquee scrollamount='3'>"+p[l]+"</marquee>",p.children[0].style.verticalAlign="text-bottom",y(p,e,g+t),y(p,m,"inline-block"))}var c=R.offsetWidth,x=v.offsetWidth;c>V&&(V=c),x>H&&(H=x)}}for(f=0;f<T.children.length;f++){var G=T.children[f];if(G.getAttribute("data-id")){var R=G.children[1],v=G.children[2],n=R.children[0],k=R.children[1];!k&&n.style.width&&y(n,e,V+t),y(R,e,V+t),y(v,e,H+t)}}};F(N);var d=f+3+D.offsetHeight,W=H+3+D.offsetWidth;d>M?y(D,J,_-(d-M)+Z+t):y(D,J,_+Z+t),W>B?y(D,G,K-(W-B)+o+t):y(D,G,K+o+t);var h=E.$21b;h&&h.each(function(b){F(b),b.offsetHeight>M&&C(b)}),E.$9b&&P(R(),Y?"touchstart":"mousedown",E.$9b,!0),E.afterShow&&E.afterShow(z),E.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=x:!1},getRelatedView:function(){return this.$12b},hide:function(){var L=this,t=L._view;t&&t.parentNode&&(o(t.parentNode,t),q(R(),Y?"touchstart":"mousedown",L.$9b,!0),L.afterHide&&L.afterHide())},dispose:function(){var l=this,G=l.$12b,m=l._view;m&&(m.parentNode&&o(m.parentNode,m),l.disableGlobalKey(),G&&(Y?(q(G,"touchstart",l.$6b,!0),q(G,"touchmove",l.$7b),q(G,"touchend",l.$8b)):q(G,"contextmenu",l.$27b)),l._view=l._items=l.$21b=l.$19b=l.$12b=l.beforeShow=l.afterShow=l.afterHide=l.$9b=l.$3b=l.$6b=l.$7b=l.$8b=l.$27b=x)},$46b:function(G,K,C,U){var B=M.initContext(G);M.translateAndScale(B,0,0,1),B.clearRect(0,0,C,U),c.drawStretchImage(B,c.getImage(K),"fill",0,0,C,U),B.restore()},$47b:function(){var T,F,x,S=this,$=S._view;if(S.isShowing()){var N=Q($,".check-prefix");for(x=0;x<N.length;x++){var z=N[x];T=z.clientWidth,F=z.clientHeight,z.$48b=T,z.$49b=F,M.setCanvas(z,T,F)}var f=Q($,".radio-prefix");for(x=0;x<f.length;x++){var t=f[x];T=t.clientWidth,F=t.clientHeight,t.$48b=T,t.$49b=F,M.setCanvas(t,T,F)}var y=Q($,".contextmenu-item-icon");for(x=0;x<y.length;x++){var Y=y[x];T=Y.clientWidth,F=Y.clientHeight,Y.$48b=T,Y.$49b=F,M.setCanvas(Y,T,F)}}},validateImpl:function(){var w,K,G,t=this,x=t._view;if(t.isShowing()){var f=Q(x,".check-prefix");for(G=0;G<f.length;G++){var z=f[G];w=z.$48b,K=z.$49b,w&&K&&t.$46b(z,c.contextMenuCheckIcon,w,K)}var A=Q(x,".radio-prefix");for(G=0;G<A.length;G++){var J=A[G];w=J.$48b,K=J.$49b,w&&K&&t.$46b(J,c.contextMenuRadioIcon,w,K)}var p=Q(x,".contextmenu-item-icon");for(G=0;G<p.length;G++){var L=p[G];w=L.$48b,K=L.$49b,w&&K&&t.$46b(L,c.getImage(L.$50b),w,K)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);