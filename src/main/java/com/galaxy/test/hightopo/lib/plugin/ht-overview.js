!function(L,T){"use strict";var k="ht",r=k+".graph.",o=L[k],$=o.graph,J=o.Default,j=o.Color,U=null,I="px",e=J.getInternal(),x=e.getPinchDist,S=J.preventDefault,Q=J.getTouchCount,P=J.startDragging;e.addMethod(J,{overviewBackground:j.widgetBackground,overviewMaskBackground:j.transparent,overviewContentBorderColor:j.widgetBorder,overviewContentBackground:j.background},!0),$.Overview=function(C){var Y=this,G=Y._view=e.createView(1,Y);Y._canvas=e.createCanvas(G),G.style.background=J.overviewBackground,G.appendChild(Y._mask=e.createDiv()),Y.gv=C,Y.redraw(),Y.addListeners(),C.addViewListener(Y.handleView,Y)},J.def(r+"Overview",T,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:J.overviewMaskBackground,_contentBorderColor:J.overviewContentBorderColor,_contentBackground:J.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var U=this;U.gv.removeViewListener(U.handleView,U)},onPropertyChanged:function(){this.redraw()},handleView:function(d){this._autoUpdate&&"validate"===d.kind&&this.redraw()},redraw:function(){var y=this;y._redraw||(y._redraw=1,y.iv(50))},validateImpl:function(){var N=this,y=N.gv,R=N._canvas,A=N._mask,P=A.style,d=N.getWidth(),B=N.getHeight(),n=y.getViewRect(),c=y.getScrollRect(),u=c.x,L=c.y,K=c.width,x=c.height,G=N._rate=Math.max(K/d,x/B),_=N._x=(d-K/G)/2,b=N._y=(B-x/G)/2,g=N._redraw;if(0!==n.width&&0!==n.height||N.hasRetry||(J.callLater(N.iv,N,U),N.hasRetry=!0),(d!==R.clientWidth||B!==R.clientHeight)&&(e.setCanvas(R,d,B,1),g=1),e.isSameRect(c,N._scrollRect)||(N._scrollRect=c,g=1),g){var T=e.initContext(R),m=N._contentBackground,H=N._contentBorderColor;T.clearRect(0,0,d,B),m&&e.fillRect(T,_,b,K/G,x/G,m),H&&e.drawBorder(T,H,_,b,K/G,x/G),T.translate(-u/G+_,-L/G+b),T.scale(1/G,1/G),y._42(T),T.restore()}P.background=N._maskBackground,P.left=_+(n.x-u)/G+I,P.top=b+(n.y-L)/G+I,P.width=n.width/G+I,P.height=n.height/G+I,delete N._redraw},center:function(T){var C=this,R=C.gv,Z=R._zoom,O=R._29I,$=C._rate,m=C._scrollRect,P=J.getLogicalPoint(T,C._canvas),n=m.x+(P.x-C._x)*$,z=m.y+(P.y-C._y)*$;R.setTranslate((O.width/2-n)*Z,(O.height/2-z)*Z)},handle_mousedown:function(H){this.handle_touchstart(H)},handleWindowMouseUp:function(f){this.handleWindowTouchEnd(f)},handleWindowMouseMove:function(V){this.handleWindowTouchMove(V)},handle_mousewheel:function(U){this.handleScroll(U,U.wheelDelta)},handle_DOMMouseScroll:function(L){2===L.axis&&this.handleScroll(L,-L.detail)},handleScroll:function(A,e){S(A);var L=this.gv;e>0?L.scrollZoomIn():0>e&&L.scrollZoomOut()},handle_touchstart:function(k){if(S(k),J.isLeftButton(k)){var D=this,M=D.gv,y=Q(k);1===y?J.isDoubleClick(k)&&M.isResettable()?M.reset():(D.center(k),P(D,k)):2===y&&(D._dist=x(k),P(D,k))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(T){var f=this,c=f._dist,r=Q(T);1===r?f.center(T):2===r&&c!=U&&f.gv.handlePinch(U,x(T),c)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);