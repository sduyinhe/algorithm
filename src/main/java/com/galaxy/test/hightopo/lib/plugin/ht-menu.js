!function(M,x){"use strict";var T="ht",C=M[T],k="innerHTML",A="className",S=null,B="px",W=C.Default,V=W.getInternal(),R="0",v=function(){return document},w=function(G){return v().createElement(G)},o=function(){return w("canvas")},m=function(H,A,z){H.style.setProperty(A,z,S)},E=function(J,V,F){W.def(C.widget[J],V,F)},z=function(I,F){I.appendChild(F)},Z=function(Y,U){Y.removeChild(U)},Y=function(A,P,q,W){A.addEventListener(P,q,!!W)},D=function(u,Z,v,y){u.removeEventListener(Z,v,!!y)},G=W.isTouchable;V.addMethod(W,{menuLabelFont:(G?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),C.widget.Menu=function(y){var X=this,Q=X._view=V.createView(null,X),t=X.$1g=new C.widget.ContextMenu,U=w("ul");t._r=!0,t._view[A]+=" ht-widget-dropdownmenu",Q[A]="ht-widget-menu",U[A]="header",m(Q,"margin",R),m(Q,"padding",R),m(Q,"background",W.menuBackground),m(Q,"-webkit-user-select","none"),m(Q,"-moz-user-select","none"),m(Q,"user-select","none"),m(Q,"text-align","left"),m(Q,"border-bottom",W.menuSeparatorWidth+"px solid "+W.menuSeparatorColor),m(Q,"cursor","default"),m(Q,"overflow","auto"),m(Q,"white-space","nowrap"),m(Q,"font",W.menuLabelFont),m(Q,"color",W.menuLabelColor),m(Q,"box-sizing","border-box"),m(Q,"-moz-box-sizing","border-box"),m(U,"list-style","none"),m(U,"margin",R),m(U,"padding",R),m(U,"display","inline-block"),z(Q,U),X.setItems(y),X.$2g=function(Z){X.$3g(Z)},X.$4g=function(C){X.$5g(C)},X.$6g=function(v){X.$7g(v)},X.$8g=function(M){X.$9g(M)},X.$9b=function(k){X.$10g(k)},X._autoShow=!0,X.setAutoShow(!1),t.afterHide=function(){X.$11g()},t.afterShow=function(){X.$12g()},D(v(),"keydown",t.$3b),X.$3b=function(Y){X.$13g(Y)},X.invalidate()},E("Menu",x,{_items:S,$14g:W.menuHoverBackground,$15g:W.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(r){var V=this;if(V.$21g=r,V.setItems(V._items),"largeicons"===r){for(var A=V._view.querySelectorAll(".header-item"),C=0,q=0;q<A.length;q++){var p=A[q];C=Math.max(C,p.clientWidth)}for(var q=0;q<A.length;q++){var p=A[q];m(p,"min-width",C+B)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(D){this.$22g=D;for(var C=this._view.querySelectorAll(".header-item"),f=0;f<C.length;f++){var t=C[f];m(t,"margin-left",D+B),m(t,"margin-right",D+B)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(e){this.$23g=e;for(var X=this._view.querySelectorAll(".header-item"),$=0;$<X.length;$++){var _=X[$];m(_,"margin-top",e+B),m(_,"margin-bottom",e+B)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(s){this.$24g=s,m(this._view,"text-align",s)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var o=this,U=o._enableGlobalKey;U===!1&&(Y(v(),"keydown",o.$3b),o._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,D(v(),"keydown",this.$3b)},setHoverBackground:function(y){this.$14g=y},setHoverColor:function(C){this.$15g=C},setItems:function(p){var C=this,Q=C._view,I=C.$21g;if(C._items=p,Q.children[0][k]="",C.$16g={},p&&p.length){for(var T=Q.children[0],h=0,b=v().createDocumentFragment();h<p.length;h++){var u=p[h],d=w("li"),V=w("span");if(u.icon){var L=o();L[A]="menu-item-icon","smallicons"===I?(m(L,"height","1.2em"),m(L,"width","1.2em"),m(L,"vertical-align","middle")):(m(L,"height","32px"),m(L,"width","32px"),m(L,"display","block"),m(L,"margin","0 auto")),L.$20g=u.icon,z(d,L)}d[A]="header-item",m(d,"display","inline-block"),m(d,"vertical-align","top"),m(d,"padding","0 1.2em"),m(d,"line-height","1.8em"),"largeicons"===I&&m(d,"text-align","center"),m(d,"background-color","rgba(0,0,0,0)"),d.setAttribute("data-index",h),C.$16g[h]=u.items,V[k]=u.label,"iconsonly"!==I&&z(d,V),z(b,d)}z(T,b)}},showDropdownMenu:function(T){var f=this,F=f.$16g[T],o=f.$1g,O=f._view.children[0].children[T],A=f.$17g;if(O&&O!==A){A&&f.hideDropdownMenu();var e=O.getBoundingClientRect(),E=W.getWindowInfo();f.$17g=O,o.setItems(F),o.show(e.left+E.left,e.top+e.height+E.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(f,q){var H=this,Z=H._items;return Z&&0!==Z.length?H.$1g.getItemByProperty(f,q,Z):S},$12g:function(){var A=this,I=A.$17g;I.style.background=A.$14g,I.style.color=A.$15g,A._autoShow||Y(v(),G?"touchstart":"mousedown",A.$9b)},$11g:function(){var t=this,P=t.$17g;P&&(P.style.background="",P.style.color="",t.$17g=S),D(v(),G?"touchstart":"mousedown",t.$9b)},$10g:function(V){var M=this,_=M._view,F=M.$1g,u=_.children[0];!v().body.contains(_)||u.contains(V.target)||F._view.contains(V.target)||M.hideDropdownMenu()},$13g:function(C){var x=this,s=x.$1g;v().body.contains(x._view)&&s.$13b.$4b.call(s.$13b,C,x._items)},setAutoShow:function(f){var E=this,H=E.$1g,U=E._view;E._autoShow!==f&&(E._autoShow?(D(U,"mouseover",E.$2g),D(U,"mouseout",E.$4g),D(H._view,"mouseout",E.$4g),G||(Y(U,"mouseover",E.$8g),Y(U,"mouseout",E.$8g)),Y(U,G?"touchstart":"mousedown",E.$6g)):(D(U,"mouseover",E.$8g),D(U,"mouseout",E.$8g),D(U,G?"touchstart":"mousedown",E.$6g),D(v(),G?"touchstart":"mousedown",E.$9b),G||(Y(U,"mouseover",E.$2g),Y(U,"mouseout",E.$4g),Y(H._view,"mouseout",E.$4g))),E._autoShow=f)},$3g:function(L){var F=this,U=F._view.children[0],r=L.target;if(U!==r&&U.contains(r)){for(;"header-item"!==r[A];)r=r.parentNode;F.showDropdownMenu(r.getAttribute("data-index"))}},$5g:function(W){var o=this,E=o._view.children[0],X=o.$1g,R=W.target,B=W.relatedTarget;!E.contains(R)&&!X._view.contains(R)||E.contains(B)||X._view.contains(B)||o.hideDropdownMenu()},$7g:function(P){var R=this,j=R._view.children[0],H=R.$1g,C=P.target;if(W.isLeftButton(P)&&j!==C&&j.contains(C))if(G){for(;"header-item"!==C[A];)C=C.parentNode;var $=C.getAttribute("data-index"),H=R.$1g,L=R._view.children[0].children[$],J=R.$17g;H.isShowing()&&R.hideDropdownMenu(),L!==J&&R.showDropdownMenu($)}else if(H.isShowing())R.hideDropdownMenu();else{for(;"header-item"!==C[A];)C=C.parentNode;R.showDropdownMenu(C.getAttribute("data-index"))}},$9g:function(z){var B=this,c=B._view,Z=B.$1g,_=z.target;if(c.contains(_)){for(var n=c.querySelectorAll(".header-item"),f=S,F=0;F<n.length;F++){var X=n[F];X.style.background="",X.style.color="","mouseover"===z.type?X.contains(_)&&(f=X):"mouseout"===z.type&&Z.isShowing()&&B.$17g===X&&(f=X)}Z.isShowing()&&(f||(f=B.$17g),B.showDropdownMenu(f.getAttribute("data-index"))),f&&(f.style.background=B.$14g,f.style.color=B.$15g)}},getShowingMenuIndex:function(){var m=this.$17g;return m?m.getAttribute("data-index"):-1},addTo:function(Q){var v=this,H=v._view;z(Q,H),v.invalidate()},dispose:function(){var l=this,h=l._view,F=l.$1g;h&&(l._autoShow?(D(h,"mouseover",l.$2g),D(h,"mouseout",l.$4g),D(F._view,"mouseout",l.$4g)):(D(h,"mouseover",l.$8g),D(h,"mouseout",l.$8g),D(h,G?"touchstart":"mousedown",l.$6g),D(v(),G?"touchstart":"mousedown",l.$9b)),D(v(),"keydown",l.$3b),F.dispose(),h.parentNode&&Z(h.parentNode,h),l._view=l.$1g=l.$16g=l._items=l.$17g=l.$2g=l.$4g=l.$6g=l.$8g=l.$9b=l.$3b=S)},$19g:function(G,d,S,C){var s=V.initContext(G);V.translateAndScale(s,0,0,1),s.clearRect(0,0,S,C),W.drawStretchImage(s,W.getImage(d),"fill",0,0,S,C),s.restore()},validateImpl:function(){var O,u,U,F=this,h=F._view,n=h.querySelectorAll(".menu-item-icon");for(U=0;U<n.length;U++){var v=n[U];O=v.clientWidth,u=v.clientHeight,O&&u&&(V.setCanvas(v,O,u),F.$19g(v,W.getImage(v.$20g),O,u))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);