!function(j,Z,q){"use strict";var t="ht",l=j[t],w=null,E=Math,D=E.abs,m=E.max,L=Number.MAX_VALUE,p=l.Default,V=p.getInternal(),C=p.clone,G=V.vec3TransformMat4,O=V.appendArray,c=function(){var h=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,X=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,f=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,S=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,H=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,I=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,c=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,$=function(V,P){return P=parseInt(P),P>=0?V[P-1]:V[P+V.length]},x=function(p,L,h,x,W,i){if(p.vs){var e=$(L,x),P=$(L,W),V=$(L,i),J=h.matrix,d=p.vs;if(h.flipFace){var t=P;P=V,V=t}J?(O(d,G(C(e),J)),O(d,G(C(P),J)),O(d,G(C(V),J))):(O(d,e),O(d,P),O(d,V))}},T=function(N,l,z,o,w,F){if(N.vs){var E=$(l,o),h=$(l,w),H=$(l,F),V=z.flipY;if(z.flipFace){var s=h;h=H,H=s}N.uv.push(E[0],V?1-E[1]:E[1],h[0],V?1-h[1]:h[1],H[0],V?1-H[1]:H[1])}},R=function(X,S,p,K,f,V){if(X.vs){var i=$(S,K),R=$(S,f),J=$(S,V),e=p.normalMatrix,k=X.ns;if(p.flipFace){var u=R;R=J,J=u}e?(O(k,G(C(i),e)),O(k,G(C(R),e)),O(k,G(C(J),e))):(O(k,i),O(k,R),O(k,J))}},j=function(U,Z,e,h,u,p,$,g){var j=h&&h.length&&g;p[3]===q?(x(U,Z,u,p[0],p[1],p[2]),$&&T(U,e,u,$[0],$[1],$[2]),j&&R(U,h,u,g[0],g[1],g[2])):(x(U,Z,u,p[0],p[1],p[3]),x(U,Z,u,p[1],p[2],p[3]),$&&(T(U,e,u,$[0],$[1],$[3]),T(U,e,u,$[1],$[2],$[3])),j&&(R(U,h,u,g[0],g[1],g[3]),R(U,h,u,g[1],g[2],g[3])))},t=function(N,p,Q,w){var F,W,B,J,Z,q,y,R=L,j=L,d=L,P=-L,r=-L,I=-L;for(F in N)for(q=N[F].vs,y=q.length,W=0;y>W;W+=3)B=q[W+0],J=q[W+1],Z=q[W+2],R>B&&(R=B),j>J&&(j=J),d>Z&&(d=Z),B>P&&(P=B),J>r&&(r=J),Z>I&&(I=Z);if(Q){var x=R+(P-R)/2,H=j+(r-j)/2,C=d+(I-d)/2;for(F in N)for(q=N[F].vs,y=q.length,W=0;y>W;W+=3)q[W+0]-=x,q[W+1]-=H,q[W+2]-=C}var s,M,b;Q?(s=P-R,M=r-j,b=I-d):(s=2*m(D(R),D(P)),M=2*m(D(j),D(r)),b=2*m(D(d),D(I))),w.rawS3=[s,M,b];for(F in N){if(q=N[F].vs,p)for(y=q.length,W=0;y>W;W+=3)s&&(q[W+0]/=s),M&&(q[W+1]/=M),b&&(q[W+2]/=b);N[F].rawS3=w.rawS3}};return function(o,b,x){if(!o)return w;V.isString(b)&&(b=K(b)),x||(x={}),x.flipY==w&&(x.flipY=!0),(x.s3||x.r3||x.t3||x.mat)&&(x.matrix=V.createWorldMatrix(x.mat,x.s3,x.r3,x.rotationMode,x.t3));var R,L,$,M,l,J,v=[],s=[],g=x.ignoreNormal?w:[],U=x.reverseFlipMtls,Z={vs:[],uv:[],ns:g?[]:w},F={htdefault:Z},d=o.split("\n"),Q=0;for(g&&x.matrix&&(x.normalMatrix=V.createNormalMatrix(x.matrix));Q<d.length;Q++)if(L=d[Q].trim(),0!==L.length&&"#"!==L.charAt(0))if($=h.exec(L))v.push([parseFloat($[1]),parseFloat($[2]),parseFloat($[3])]);else if($=X.exec(L))s.push([parseFloat($[1]),parseFloat($[2])]);else if(g&&($=f.exec(L)))x.flipFace?g.push([parseFloat(-$[1]),parseFloat(-$[2]),parseFloat(-$[3])]):g.push([parseFloat($[1]),parseFloat($[2]),parseFloat($[3])]);else if($=S.exec(L))j(Z,v,s,g,x,[$[1],$[2],$[3],$[4]]);else if($=H.exec(L))j(Z,v,s,g,x,[$[2],$[5],$[8],$[11]],[$[3],$[6],$[9],$[12]]);else if($=I.exec(L))j(Z,v,s,g,x,[$[2],$[6],$[10],$[14]],[$[3],$[7],$[11],$[15]],[$[4],$[8],$[12],$[16]]);else if($=c.exec(L))j(Z,v,s,g,x,[$[2],$[5],$[8],$[11]],w,[$[3],$[6],$[9],$[12]]);else if(/^usemtl /.test(L)&&(M=L.substring(7).trim(),!(Z=F[M]))){if(Z={name:M,vs:[],uv:[],ns:g?[]:w},x.ignoreMtls&&x.ignoreMtls.indexOf(M)>=0&&delete Z.vs,(x.reverseFlip||"*"===U||U&&U.indexOf(M)>=0)&&(Z.reverseFlip=!0),b&&(l=b[M],l&&(x.ignoreColor||(Z.color=l.kd),!x.ignoreTransparent&&l.d>0&&l.d<1&&(Z.transparent=!0,Z.opacity=l.d),!x.ignoreImage&&(J=l.map_kd)))){for(J=J.split(" "),R=0;R<J.length;R++)"-o"===J[R]?(Z.uvOffset=[parseFloat(J[R+1]),parseFloat(J[R+2])],R+=2):"-s"===J[R]&&(Z.uvScale=[parseFloat(J[R+1]),parseFloat(J[R+2])],R+=2);Z.image=(x.prefix||"")+J[J.length-1]}F[M]=Z}var A=[];for(var r in F){var k=F[r].vs;k&&0!==k.length||A.push(r)}A.forEach(function(a){delete F[a]}),t(F,x.cube,x.center,x);var Y=x.shape3d;if(Y){var W=[];for(var M in F){var Z=F[M];W.rawS3=Z.rawS3,W.push(Z)}p.setShape3dModel(Y,W)}return F}}(),K=function(A){var M={};if(A)for(var p,I,T,S,n,y,P=A.split("\n"),s=/\s+/,r=0;r<P.length;r++)I=P[r].trim(),0!==I.length&&"#"!==I.charAt(0)&&(T=I.indexOf(" "),S=(T?I.substring(0,T):I).toLowerCase(),n=(T?I.substring(T+1):"").trim(),"newmtl"===S?M[n]=p={name:n}:p&&("ka"===S||"kd"===S||"ks"===S?(y=n.split(s,3),p[S]=[parseFloat(y[0]),parseFloat(y[1]),parseFloat(y[2]),1]):p[S]="ns"===S||"d"===S?parseFloat(n):n));return M};V.addMethod(p,{loadObj:function(m,X,T){T=T||{},p.xhrLoad([m,X],function(E){var y,h=T.shape3d,v=E?c(E[0],E[1],T):null;if(v)if(h)y=p.getShape3dModel(h);else{y=[];for(var A in v){var R=v[A];y.rawS3=R.rawS3,y.push(R)}}T.finishFunc&&T.finishFunc(v,y,y.rawS3)},T)},parseObj:function(S,V,e){return c(S,V,e)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);